(()=>{"use strict";const e=(t,a,s)=>{let n=void 0!==a?a:{},o=void 0!==s?s:"";return Object.keys(t).forEach((a=>{"object"==typeof t[a]&&null!==t[a]&&Object.keys(t[a]).length>0?e(t[a],n,`${o}${a}.`):n[`${o}${a}`]="string"==typeof t[a]?t[a]:JSON.stringify(t[a])})),n};let t={PAGE:chrome.avast?.stats.EventType.PAGE||"page",CLICK:chrome.avast?.stats.EventType.CLICK||"click",getPageParams:e=>({page_domain:e.page_domain,page_location:"secure://"+e.page_domain,group:{page:{page_name:e.id,page_number:0,page_flow_id:e.page_flow_id},messaging:{id:e.m_id}}}),getClickParams:(e,a)=>({...t.getPageParams(e),...a}),add:(t,a)=>{chrome.avast.stats.add(t,e(a))}};const a=t;!function(){if(window.overlayInjected)return;let e,t,s,n;window.overlayInjected=!0;let o=document.createElement("div");o.setAttribute("id","messaging-overlay");let i={display:"block",margin:"0",padding:"0",border:"0",position:"fixed",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",zIndex:101};const d=()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(i.opacity=.85,i.backgroundColor="#202020"):(i.opacity=.5,i.backgroundColor="#242424")};d(),Object.assign(o.style,i),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{d(),Object.assign(o.style,i)}));const r=()=>{const t=n.variables?.find((e=>"messageType"===e.id)),a=[{variableName:"localVariables",m_id:e,param_id:e,values:{event_action:"dismissed",deferredTimestamp:Date.now()}}];return t&&a.push({variableName:"messageTypesInteractions",m_id:t.value,param_id:t.value,values:{event_action:"dismissed",deferredTimestamp:Date.now()}}),a};o.addEventListener("click",(s=>{if("click"===s.type&&"messaging-overlay"===s.target.id){try{chrome.runtime.sendMessage({action:"setVariables",payload:r()}),chrome.runtime.sendMessage({action:"trackAction",m_id:e,templateUrl:t,payload:{eventType:a.CLICK,event:{click_id:"btn-overlay",event_action:"dismissed"}}})}catch(e){}chrome.runtime.sendMessage({action:"close",m_id:e,templateUrl:t})}}));const c=()=>{setTimeout((()=>{const e=document.querySelector(".BrowserSettings"),t=document.querySelector(".BrowserSettings__overlay");e&&t&&(Object.assign(e.style,{zIndex:105}),Object.assign(t.style,{zIndex:104}))}),100)};chrome.runtime.onMessage.addListener(((a,d,r)=>{if("open-overlay"==a.action){const d=document.querySelector(".BrowserSettingsButton");a.payload&&a.payload.post&&(n=a.payload.post,"131"===a.payload.post.name&&d?(s=d.zIndex,Object.assign(d.style,{zIndex:103}),d.addEventListener("click",c)):d&&(Object.assign(d.style,{zIndex:s||12}),d.removeEventListener("click",c))),Object.assign(o.style,i),e=a.payload.m_id,t=a.payload.templateUrl,document.querySelector("#messaging-overlay")||document.documentElement.appendChild(o)}else"close-overlay"==a.action&&(document.documentElement.removeChild(o),e=t=s=n=null,window.overlayInjected=!1)}))}()})();